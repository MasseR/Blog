/*!
 * jQuery Lifestream Plug-in
 * @version 0.2.0
 * Show a stream of your online activity
 *
 * Copyright 2011, Christian Vuerings - http://denbuzze.com
 *//*globals jQuery, $ */(function(a){a.fn.lifestream=function(b){return this.each(function(){var c=a(this),d=jQuery.extend({classname:"lifestream",feedloaded:null,limit:10,list:[]},b),e={count:d.list.length,items:[]},f=jQuery.extend(!0,{},d),g=function(b){a.merge(e.items,b),e.items.sort(function(a,b){return b.date-a.date});var f=e.items,g=f.length<d.limit?f.length:d.limit,h=0,i,j=a('<ul class="'+d.classname+'"/>');for(;h<g;h++)i=f[h],i.html&&a('<li class="'+d.classname+"-"+i.config.service+'">').data("time",i.date).append(i.html).appendTo(j);c.html(j),a.isFunction(d.feedloaded)&&d.feedloaded()},h=function(){var b=0,c=d.list.length;delete f.list;for(;b<c;b++){var e=d.list[b];a.fn.lifestream.feeds[e.service]&&a.isFunction(a.fn.lifestream.feeds[e.service])&&e.user&&(e._settings=f,a.fn.lifestream.feeds[e.service](e,g))}};jQuery.tmpl?h():jQuery.getScript("https://raw.github.com/jquery/jquery-tmpl/master/jquery.tmpl.min.js",h)})},a.fn.lifestream.createYqlUrl=function(a){return"http://query.yahooapis.com/v1/public/yql?q=__QUERY__&env=store://datatables.org/alltableswithkeys&format=json".replace("__QUERY__",encodeURIComponent(a))},a.fn.lifestream.feeds=a.fn.lifestream.feeds||{}})(jQuery),$.fn.lifestream.feeds.bitly=function(a,b){var c=$.extend({},{created:'created URL <a href="${short_url}" title="${title}">${short_url}</a>'},a.template);$.ajax({url:$.fn.lifestream.createYqlUrl('select * from json where url="http://bitly.com/u/'+a.user+'.json"'),dataType:"jsonp",success:function(d){var e=[],f=0,g;if(d.query&&d.query.count&&d.query.results.json&&d.query.results.json.data){list=d.query.results.json.data,g=list.length;for(;f<g;f++){var h=list[f];e.push({date:new Date(h.created*1e3),config:a,html:$.tmpl(c.created,h)})}}b(e)}});return{template:c}},$.fn.lifestream.feeds.blogger=function(a,b){var c=$.extend({},{posted:'posted <a href="${origLink}">${title}</a>'},a.template),d=function(b){var d=[],e,f=0,g,h,i,j;if(b.query&&b.query.count&&b.query.count>0&&b.query.results.feed.entry){e=b.query.results.feed.entry,g=e.length;for(;f<g;f++){h=e[f];if(!h.origLink){i=0,j=h.link.length;for(;i<j;i++)h.link[i].rel==="alternate"&&(h.origLink=h.link[i].href)}h.origLink&&(h.title.content&&(h.title=h.title.content),d.push({date:new Date(h.published),config:a,html:$.tmpl(c.posted,h)}))}}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from xml where url="http://'+a.user+'.blogspot.com/feeds/posts/default"'),dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.dailymotion=function(a,b){var c=$.extend({},{uploaded:'uploaded a video <a href="${link}">${title[0]}</a>'},a.template),d=function(b){var d=[],e,f=0,g,h;if(b.query&&b.query.count&&b.query.count>0&&b.query.results.rss.channel.item){e=b.query.results.rss.channel.item,g=e.length;for(;f<g;f++)h=e[f],d.push({date:new Date(h.pubDate),config:a,html:$.tmpl(c.uploaded,h)})}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from xml where url="http://www.dailymotion.com/rss/user/'+a.user+'"'),dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.delicious=function(a,b){var c=$.extend({},{bookmarked:'bookmarked <a href="${u}">${d}</a>'},a.template);$.ajax({url:"http://feeds.delicious.com/v2/json/"+a.user,dataType:"jsonp",success:function(d){var e=[],f=0,g;if(d&&d.length&&d.length>0){g=d.length;for(;f<g;f++){var h=d[f];e.push({date:new Date(h.dt),config:a,html:$.tmpl(c.bookmarked,h)})}}b(e)}});return{template:c}},$.fn.lifestream.feeds.deviantart=function(a,b){var c=$.extend({},{posted:'posted <a href="${link}">${title}</a>'},a.template);$.ajax({url:$.fn.lifestream.createYqlUrl('select title,link,pubDate from rss where url="http://backend.deviantart.com/rss.xml?q=gallery%3A'+encodeURIComponent(a.user)+"&type=deviation"+'" | unique(field="title")'),dataType:"jsonp",success:function(d){var e=[],f,g,h=0,i;if(d.query&&d.query.count>0){f=d.query.results.item,i=f.length;for(;h<i;h++)g=f[h],e.push({date:new Date(g.pubDate),config:a,html:$.tmpl(c.posted,g)})}b(e)}});return{template:c}},$.fn.lifestream.feeds.flickr=function(a,b){var c=$.extend({},{posted:'posted a photo <a href="${link}">${title}</a>'},a.template);$.ajax({url:"http://api.flickr.com/services/feeds/photos_public.gne?id="+a.user+"&lang=en-us&format=json",dataType:"jsonp",jsonp:"jsoncallback",success:function(d){var e=[],f=0,g;if(d&&d.items&&d.items.length>0){g=d.items.length;for(;f<g;f++){var h=d.items[f];e.push({date:new Date(h.published),config:a,html:$.tmpl(c.posted,h)})}}b(e)}});return{template:c}},$.fn.lifestream.feeds.flickr=function(a,b){var c=$.extend({},{posted:'posted a photo <a href="${link}">${title}</a>'},a.template);$.ajax({url:"http://api.flickr.com/services/feeds/photos_public.gne?id="+a.user+"&lang=en-us&format=json",dataType:"jsonp",jsonp:"jsoncallback",success:function(d){var e=[],f=0,g;if(d&&d.items&&d.items.length>0){g=d.items.length;for(;f<g;f++){var h=d.items[f];e.push({date:new Date(h.published),config:a,html:$.tmpl(c.posted,h)})}}b(e)}});return{template:c}},$.fn.lifestream.feeds.foomark=function(a,b){var c=$.extend({},{bookmarked:'bookmarked <a href="${url}">${url}</a>'},a.template);$.ajax({url:"http://api.foomark.com/urls/list/",data:{format:"jsonp",username:a.user},dataType:"jsonp",success:function(d){var e=[],f=0,g;if(d&&d.length&&d.length>0){g=d.length;for(;f<g;f++){var h=d[f];e.push({date:new Date(h.created_at.replace(" ","T")),config:a,html:$.tmpl(c.bookmarked,h)})}}b(e)}});return{template:c}},$.fn.lifestream.feeds.formspring=function(a,b){var c=$.extend({},{answered:'answered a question <a href="${link}">${title}</a>'},a.template),d=function(b){var d=[],e,f=0,g,h;if(b.query&&b.query.count&&b.query.count>0&&b.query.results.rss.channel.item){e=b.query.results.rss.channel.item,g=e.length;for(;f<g;f++)h=e[f],d.push({date:new Date(h.pubDate),config:a,html:$.tmpl(c.answered,h)})}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from xml where url="http://www.formspring.me/profile/'+a.user+'.rss"'),dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.forrst=function(a,b){var c=$.extend({},{posted:'posted a ${post_type} <a href="${post_url}">${title}</a>'},a.template);$.ajax({url:"http://forrst.com/api/v2/users/posts?username="+a.user,dataType:"jsonp",success:function(d){var e=[],f=0,g;if(d&&d.resp.length&&d.resp.length>0){g=d.resp.length;for(;f<g;f++){var h=d.resp[f];e.push({date:new Date(h.created_at.replace(" ","T")),config:a,html:$.tmpl(c.posted,h)})}}b(e)}});return{template:c}},$.fn.lifestream.feeds.foursquare=function(a,b){var c=$.extend({},{checkedin:'checked in @ <a href="${link}">${title}</a>'},a.template),d=function(b){var d=[],e=0,f;if(b.query&&b.query.count&&b.query.count>0){f=b.query.count;for(;e<f;e++){var g=b.query.results.item[e];d.push({date:new Date(g.pubDate),config:a,html:$.tmpl(c.checkedin,g)})}}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from rss where url="https://feeds.foursquare.com/history/'+a.user+'.rss"'),dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.github=function(a,b){var c=$.extend({},{pushed:'<a href="${status.url}" title="{{if title}}${title} by ${author} {{/if}}">pushed</a> to <a href="http://github.com/${repo}/tree/${branchname}">${branchname}</a> at <a href="http://github.com/${repo}">${repo}</a>',gist:'<a href="${status.payload.url}" title="${status.payload.desc || ""}">${status.payload.name}</a>',commented:'commented on <a href="${status.url}">${what}</a> on <a href="http://github.com/${repo}">${repo}</a>',pullrequest:'${status.payload.action} <a href="${status.url}">pull request #${status.payload.number}</a> on <a href="http://github.com/${repo}">${repo}</a>',created:'created ${status.payload.ref_type || status.payload.object} <a href="${status.url}">${status.payload.ref || status.payload.object_name}</a> for <a href="http://github.com/${repo}">${repo}</a>',createdglobal:'created ${status.payload.object} <a href="${status.url}">${title}</a>',deleted:'deleted ${status.payload.ref_type} ${status.payload.ref} at <a href="http://github.com/${status.repository.owner}/${status.repository.name}">${status.repository.owner}/${status.repository.name}</a>'},a.template),d=function(a){return a.payload.repo||(a.repository?a.repository.owner+"/"+a.repository.name:null)||a.url.split("/")[3]+"/"+a.url.split("/")[4]},e=function(a){var b,e,f;if(a.type==="PushEvent"){e=a.payload&&a.payload.shas&&a.payload.shas.json&&a.payload.shas.json[2],b=d(a);return $.tmpl(c.pushed,{status:a,title:e,author:e?a.payload.shas.json[3]:"",branchname:a.payload.ref.split("/")[2],repo:d(a)})}if(a.type==="GistEvent")return $.tmpl(c.gist,{status:a});if(a.type==="CommitCommentEvent"){f="commit "+a.url.split("commit/")[1].split("#")[0].substring(0,7),b=d(a);return $.tmpl(c.commented,{what:f,repo:b,status:a})}if(a.type==="IssueCommentEvent"){f="issue "+a.url.split("issues/")[1].split("#")[0],b=d(a);return $.tmpl(c.commented,{what:f,repo:b,status:a})}if(a.type==="PullRequestEvent"){b=d(a);return $.tmpl(c.pullrequest,{repo:b,status:a})}if(a.type==="CreateEvent"&&(a.payload.ref_type==="tag"||a.payload.ref_type==="branch"||a.payload.object==="tag")){b=d(a);return $.tmpl(c.created,{repo:b,status:a})}if(a.type==="CreateEvent"){e=a.payload.object_name==="null"?a.payload.name:a.payload.object_name;return $.tmpl(c.createdglobal,{title:e,status:a})}if(a.type==="DeleteEvent")return $.tmpl(c.deleted,{status:a})},f=function(b){var c=[],d=0,f;if(b.query&&b.query.count&&b.query.count>0){f=b.query.count;for(;d<f;d++){var g=b.query.results.json[d].json;c.push({date:new Date(g.created_at),config:a,html:e(g)})}}return c};$.ajax({url:$.fn.lifestream.createYqlUrl('select json.repository.owner,json.repository.name, json.payload, json.type,json.url, json.created_at from json where url="http://github.com/'+a.user+'.json"'),dataType:"jsonp",success:function(a){b(f(a))}});return{template:c}},$.fn.lifestream.feeds.googlereader=function(a,b){var c=$.extend({},{starred:'shared post <a href="${link.href}">${title.content}</a>'},a.template),d=function(b){var d=[],e,f=0,g;if(b.query&&b.query.count&&b.query.count>0){e=b.query.results.feed.entry,g=e.length;for(;f<g;f++){var h=e[f];d.push({date:new Date(parseInt(h["crawl-timestamp-msec"],10)),config:a,html:$.tmpl(c.starred,h)})}}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from xml where url="www.google.com/reader/public/atom/user%2F'+a.user+'%2Fstate%2Fcom.google%2Fbroadcast"'),dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.instapaper=function(a,b){var c=$.extend({},{loved:'loved <a href="${link}">${title}</a>'},a.template),d=function(b){var d=[],e,f=0,g,h;if(b.query&&b.query.count&&b.query.count>0&&b.query.results.rss.channel.item){e=b.query.results.rss.channel.item,g=e.length;for(;f<g;f++)h=e[f],d.push({date:new Date(h.pubDate),config:a,html:$.tmpl(c.loved,h)})}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from xml where url="http://www.instapaper.com/starred/rss/'+a.user+'"'),dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.iusethis=function(a,b){var c=$.extend({},{global:'${action} <a href="${link}">${what}</a> on (${os})'},a.template),d=function(b){var d=[],e,f,g,h,i,j=0,k,l,m,n,o,p,q,r=["iPhone","OS X","Windows"];if(b.query&&b.query.count&&b.query.count>0&&b.query.results.rss){k=b.query.results.rss.length,n=["started using","stopped using","stopped loving","Downloaded","commented on","updated entry for","started loving","registered"],i=n.length;for(;j<k;j++){q=r[j],e=b.query.results.rss[j].channel.item,f=0,g=e.length;for(;f<g;f++){l=e[f],m=l.title.replace(a.user+" ",""),h=0;for(;h<i;h++)if(m.indexOf(n[h])>-1){o=n[h];break}p=m.split(o),d.push({date:new Date(l.pubDate),config:a,html:$.tmpl(c.global,{action:o.toLowerCase(),link:l.link,what:p[1],os:q})})}}}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from xml where url="http://iphone.iusethis.com/user/feed.rss/'+a.user+'" or '+'url="http://osx.iusethis.com/user/feed.rss/'+a.user+'" or '+'url="http://win.iusethis.com/user/feed.rss/'+a.user+'"'),dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.lastfm=function(a,b){var c=$.extend({},{loved:'loved <a href="${url}">${name}</a> by <a href="${artist.url}">${artist.name}</a>'},a.template),d=function(b){var d=[],e,f=0,g;if(b.query&&b.query.count&&b.query.count>0&&b.query.results.lovedtracks&&b.query.results.lovedtracks.track){e=b.query.results.lovedtracks.track,g=e.length;for(;f<g;f++){var h=e[f];d.push({date:new Date(parseInt(h.date.uts*1e3,10)),config:a,html:$.tmpl(c.loved,h)})}}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from xml where url="http://ws.audioscrobbler.com/2.0/user/'+a.user+'/lovedtracks.xml"'),dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.mlkshk=function(a,b){var c=$.extend({},{posted:'posted <a href="${link}">${title}</a>'},a.template),d=function(b){var d=[],e,f=0,g,h;if(b.query&&b.query.count&&b.query.count>0&&b.query.results.rss.channel.item){e=b.query.results.rss.channel.item,g=e.length;for(;f<g;f++)h=e[f],d.push({date:new Date(h.pubDate),config:a,html:$.tmpl(c.posted,h)})}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from xml where url="http://mlkshk.com/user/'+a.user+'/rss"'),dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.picplz=function(a,b){var c=$.extend({},{uploaded:'uploaded <a href="${url}">${title}</a>'},a.template);$.ajax({url:"http://picplz.com/api/v2/user.json?username="+a.user+"&include_pics=1",dataType:"jsonp",success:function(d){var e=[],f=0,g,h;h=d.value.users[0].pics;if(h&&h.length&&h.length>0){g=h.length;for(;f<g;f++){var i=h[f];e.push({date:new Date(i.date*1e3),config:a,html:$.tmpl(c.uploaded,{url:i.pic_files["640r"].img_url,title:i.caption||i.id})})}}b(e)}});return{template:c}},$.fn.lifestream.feeds.pinboard=function(a,b){var c=$.extend({},{bookmarked:'bookmarked <a href="${link}">${title}</a>'},a.template),d=function(b){var d=[],e,f=0,g,h;if(b.query&&b.query.count&&b.query.count>0){e=b.query.results.RDF.item,g=e.length;for(;f<g;f++)h=e[f],d.push({date:new Date(h.date),config:a,html:$.tmpl(c.bookmarked,h)})}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from xml where url="http://feeds.pinboard.in/rss/u:'+a.user+'"'),dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.posterous=function(a,b){var c=$.extend({},{posted:'posted <a href="${link}">${title}</a>'},a.template),d=function(b){var d=[],e,f=0,g,h;if(b.query&&b.query.count&&b.query.count>0&&b.query.results.rss.channel.item){e=b.query.results.rss.channel.item,g=e.length;for(;f<g;f++)h=e[f],d.push({date:new Date(h.pubDate),config:a,html:$.tmpl(c.posted,h)})}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from xml where url="http://'+a.user+'.posterous.com/rss.xml"'),dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.reddit=function(a,b){var c=$.extend({},{commented:'<a href="http://www.reddit.com/r/${item.data.subreddit}/comments/${item.data.link_id.substring(3)}/u/${item.data.name.substring(3)}?context=3">commented (${score})</a> in <a href="http://www.reddit.com/r/${item.data.subreddit}">${item.data.subreddit}</a>',created:'<a href="http://www.reddit.com${item.data.permalink}">created new thread (${score})</a> in <a href="http://www.reddit.com/r/${item.data.subreddit}">${item.data.subreddit}</a>'},a.template),d=function(a){var b=a.data.ups-a.data.downs,d={item:a,score:b>0?"+"+b:b};if(a.kind==="t1")return $.tmpl(c.commented,d);if(a.kind==="t3")return $.tmpl(c.created,d)},e=function(a){return new Date(a*1e3)};$.ajax({url:"http://www.reddit.com/user/"+a.user+".json",dataType:"jsonp",jsonp:"jsonp",success:function(c){var f=[],g=0,h;if(c&&c.data&&c.data.children&&c.data.children.length>0){h=c.data.children.length;for(;g<h;g++){var i=c.data.children[g];f.push({date:e(i.data.created),config:a,html:d(i)})}}b(f)}});return{template:c}},$.fn.lifestream.feeds.slideshare=function(a,b){var c=$.extend({},{uploaded:'uploaded a presentation <a href="${link}">${title}</a>'},a.template),d=function(b){var d=[],e,f=0,g,h;if(b.query&&b.query.count&&b.query.count>0){e=b.query.results.rss.channel.item,g=e.length;for(;f<g;f++)h=e[f],d.push({date:new Date(h.pubDate),config:a,html:$.tmpl(c.uploaded,h)})}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from xml where url="http://www.slideshare.net/rss/user/'+a.user+'"'),dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.snipplr=function(a,b){var c=$.extend({},{posted:'posted a snippet <a href="${link}">${title}</a>'},a.template),d=function(b){var d=[],e,f=0,g,h;if(b.query&&b.query.count&&b.query.count>0&&b.query.results.rss.channel.item){e=b.query.results.rss.channel.item,g=e.length;for(;f<g;f++)h=e[f],d.push({date:new Date(h.pubDate),config:a,html:$.tmpl(c.posted,h)})}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from xml where url="http://snipplr.com/rss/users/'+a.user+'"'),dataType:"jsonp",success:function(a){b(d(a))}})},$.fn.lifestream.feeds.stackoverflow=function(a,b){var c=$.extend({},{global:'<a href="${link}">${text}</a> - ${title}'},a.template),d=function(b){var c="",d="",e="",f="http://stackoverflow.com/users/"+a.user,g="http://stackoverflow.com/questions/";if(b.timeline_type==="badge")c=b.timeline_type+" "+b.action+": "+b.description,d=b.detail,e=f+"?tab=reputation";else if(b.timeline_type==="revision"||b.timeline_type==="comment"||b.timeline_type==="accepted"||b.timeline_type==="askoranswered")c=b.post_type+" "+b.action,d=b.detail||b.description||"",e=g+b.post_id;return{link:e,title:d,text:c}},e=function(a){return new Date(a*1e3)};$.ajax({url:"http://api.stackoverflow.com/1.1/users/"+a.user+"/timeline?"+"jsonp",dataType:"jsonp",jsonp:"jsonp",success:function(f){var g=[],h=0,i;if(f&&f.total&&f.total>0&&f.user_timelines){i=f.user_timelines.length;for(;h<i;h++){var j=f.user_timelines[h];g.push({date:e(j.creation_date),config:a,html:$.tmpl(c.global,d(j))})}}b(g)}});return{template:c}},$.fn.lifestream.feeds.tumblr=function(a,b){var c=$.extend({},{posted:'posted a ${type} <a href="${url}">${title}</a>'},a.template),d=function(a){var b=a["regular-title"]||a["quote-text"]||a["conversation-title"]||a["photo-caption"]||a["video-caption"]||a["audio-caption"]||a["regular-body"]||a["link-text"]||a.type||"";return b.replace(/<.+?>/gi," ")},e=function(a,b){return{date:new Date(b.date),config:a,html:$.tmpl(c.posted,{type:b.type,url:b.url,title:d(b)})}},f=function(b){var c=[],d=0,f,g;if(b.query&&b.query.count&&b.query.count>0)if($.isArray(b.query.results.posts.post)){f=b.query.results.posts.post.length;for(;d<f;d++)g=b.query.results.posts.post[d],c.push(e(a,g))}else $.isPlainObject(b.query.results.posts.post)&&c.push(e(a,b.query.results.posts.post));return c};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from tumblr.posts where username="'+a.user+'"'),dataType:"jsonp",success:function(a){b(f(a))}});return{template:c}},$.fn.lifestream.feeds.twitter=function(a,b){var c=$.extend({},{posted:"{{html tweet}}"},a.template),d=function(a){var b=function(a){return a.replace(/[a-z]+:\/\/[a-z0-9-_]+\.[a-z0-9-_:~%&\?\/.=]+[^:\.,\)\s*$]/ig,function(a){return'<a href="'+a+'">'+(a.length>25?a.substr(0,24)+"...":a)+"</a>"})},c=function(a){return a.replace(/(^|[^\w]+)\@([a-zA-Z0-9_]{1,15})/g,function(a,b,c){return b+'<a href="http://twitter.com/'+c+'">@'+c+"</a>"})},d=function(a){return a.replace(/(^|[^\w'"]+)\#([a-zA-Z0-9_]+)/g,function(a,b,c){return b+'<a href="http://search.twitter.com/search?q=%23'+c+'">#'+c+"</a>"})};return d(c(b(a)))},e=function(b){var e=[],f=0,g,h;if(b&&b.length>0){g=b.length;for(;f<g;f++)h=b[f],e.push({date:new Date(h.created_at),config:a,html:$.tmpl(c.posted,{tweet:d(h.text)})})}return e};$.ajax({url:"https://api.twitter.com/1/statuses/user_timeline.json",data:{screen_name:a.user,include_rts:1},dataType:"jsonp",success:function(a){b(e(a))}});return{template:c}},$.fn.lifestream.feeds.vimeo=function(a,b){var c=$.extend({},{posted:'posted <a href="${url}" title="${description}">${title}</a>'},a.template),d=function(b){var d=[],e=0,f,g;if(b){f=b.length;for(;e<f;e++)g=b[e],d.push({date:new Date(g.upload_date.replace(" ","T")),config:a,html:$.tmpl(c.posted,{url:g.url,description:g.description.replace(/"/g,"'").replace(/<.+?>/gi,""),title:g.title})})}return d};$.ajax({url:"http://vimeo.com/api/v2/"+a.user+"/videos.json",dataType:"jsonp",crossDomain:!0,success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.wordpress=function(a,b){var c=$.extend({},{posted:'posted <a href="${link}">${title}</a>'},a.template),d=function(b){var d=[],e,f=0,g,h;if(b.query&&b.query.count&&b.query.count>0&&b.query.results.rss.channel.item){e=b.query.results.rss.channel.item,g=e.length;for(;f<g;f++)h=e[f],d.push({date:new Date(h.pubDate),config:a,html:$.tmpl(c.posted,h)})}return d};$.ajax({url:$.fn.lifestream.createYqlUrl('select * from xml where url="http://'+a.user+'.wordpress.com/feed"'),dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}},$.fn.lifestream.feeds.youtube=function(a,b){var c=$.extend({},{favorited:'favorited <a href="${video.player.default}" title="${video.description}">${video.title}</a>'},a.template),d=function(b){var d=[],e=0,f,g;if(b.data&&b.data.items){f=b.data.items.length;for(;e<f;e++)g=b.data.items[e],d.push({date:new Date(g.created),config:a,html:$.tmpl(c.favorited,g)})}return d};$.ajax({url:"http://gdata.youtube.com/feeds/api/users/"+a.user+"/favorites?v=2&alt=jsonc",dataType:"jsonp",success:function(a){b(d(a))}});return{template:c}}